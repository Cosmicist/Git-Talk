<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>All your History are Belong to GIT</title>

        <meta name="description" content="Understanding what we do in GIT, how and why.">
        <meta name="author" content="Luciano Longo">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/flatline.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <div class="slides">
                <section
                    data-background="/images/all-your-history-are-belong-to-git.png"
                    data-background-size="contain"
                    data-background-color="#000"
                >
                </section>



                <!-- ### INTRO ### -->
                <section>
                    <h2>We're all already using GIT</h2>
                    <h1 class="fragment fade-in">RIGHT???</h1>
                    <h1 class="fragment fade-in disapproval">ಠ_ಠ</h1>

                    <aside class="notes">
                        Por qué otra charla de git?
                        Ya todos lo estamos usando en nuestros proyectos.
                    </aside>
                </section>

                <section>
                    <h1>But...</h1>
                </section>

                <section
                    data-background="/images/noidea.jpg"
                    data-background-size="contain"
                >
                    <aside class="notes" data-markdown>
                        Sabemos realmente lo que estamos haciendo y por qué?

                        A veces, trabajando, hacemos estas cosas **de memoria**, porque nos
                        dijeron de hacerlo de tal o cual manera. **Pero la memoria nos puede
                        fallar.**

                        Si no sabemos por qué algo es como es, el día que nos toque **un caso
                        distinto** y lo que hacíamos de memoria no nos sirva, **no vamos a saber
                        que hacer**. Por eso creo que siempre hay que saber como funcionan las
                        cosas por detras, o al menos, tener una idea.

                        Y esta es la idea de la charla, mejorar el conocimiento que tenemos de
                        git, y saber por qué hacemos lo que hacemos. Y de paso, por ahí nos
                        demos cuenta si lo que estamos haciendo es realmente lo que nos
                        conviene.
                    </aside>
                </section>



                <!-- ### WTF is GIT ### -->
                <section>
                    <section id="fragments">
                        <h2>WTF is GIT!?</h2>
                        <div class="fragment fade-in">
                            <h3 class="fragment highlight-red strike"><strong>Tree</strong> of <strong>changes</strong> over time?</h3>
                        </div>
                        <p class="fragment">Not quite.</p>
                        <h3>
                            <span class="fragment">Git is a <strong class="green">DAG</strong></span>
                            <span class="fragment">of <strong class="green">snapshots</strong>.</span>
                        </h3>
                    </section>
                </section>

                <section>
                    <section data-background="/images/dag-wat.jpg">
                        <h1>DAG wat?</h1>
                    </section>

                    <section>
                        <h2>Directed Acyclic Graph</h2>
                    </section>

                    <section
                        data-background="/images/dr-evil-right.gif"
                        data-background-size="contain"
                    >
                    </section>

                    <section>
                        <h2>Directed Acyclic Graph</h2>

                        <h3>
                            A <strong class="green">DAG</strong>, is a <strong class="fragment highlight-green">directed graph</strong> with <strong class="fragment highlight-green">no directed cycles</strong>.
                        </h3>
                    </section>

                    <section>
                        <h3>
                            Formed by a collection of <strong class="fragment highlight-green">nodes</strong> and <strong class="fragment highlight-green">directed edges</strong> that connect them.
                        </h3>

                        <img src="/images/dag-nodes-edges.svg">

                        <p>
                            <strong class="fragment highlight-green">There is no way to start at some node N and cycle back again to N.</strong>
                        </p>
                    </section>

                    <section>
                        <h3>
                            The difference with a tree is that <strong class="fragment highlight-green grow">nodes in a DAG can have multiple parents</strong>.
                        </h3>

                        <h3 class="fragment">
                            <strong class="red">A tree doesn't allow nodes to have multiple parents.</strong>
                        </h3>
                    </section>

                    <section>
                        <h3>
                            The most common case of this in git is when you do a merge. <strong class="fragment highlight-green">A merge commit will have all of the commits that were merged as parents.</strong>
                        </h3>
                    </section>

                    <section>
                        <h2>This is could be a <strong>tree</strong></h2>
                        <p><em>(Polytree actually &mdash;directed tree)</em></p>
                        <img src="/images/tree-sample.svg">
                        <h3>Only one parent per node</h3>
                    </section>

                    <section>
                        <h2>Only it's really a <strong>DAG</strong></h2>
                        <img src="/images/dag-sample.svg">
                        <h3>The <strong class="blue">blue node</strong> represents a <strong class="green">merge commit</strong></h3>
                    </section>
                </section>

                <section>
                    <section>
                        <h2><strong>Snapshots</strong>, not <strong>changes</strong></h2>
                    </section>

                    <section>
                        <h3>Most VCSs store only the <strong class="green">file changes</strong></h3>
                        <img src="/images/changes.svg">

                        <aside class="notes">
                            This is practical in terms of disk space, but is not performant and pretty fragile.
                            We could easily loose data if the original file were to be corrupted.
                        </aside>
                    </section>

                    <section>
                        <h3>While GIT stores a <strong class="green">snapshot</strong> <strong>of each file</strong></h3>
                        <img src="/images/snapshots.svg">
                        <h4>
                            <strong>Efficient:</strong> If a file didn't change, a <strong class="green">link to the previous version</strong> is stored.
                        </h4>

                        <aside class="notes">
                            This may seem like it's not performant at all, but Git doesn't store a copy of every file on every commit. If a file didn't change, then just a link to the previous version will be stored. And checking out the files state is lightning fast.

                            Git model is also more robust, but we'll see this later.
                        </aside>
                    </section>

                </section>



                <!-- ### Trees, Blobs & Checksums ### -->
                <section>
                    <!-- ### What's a commit made of? ### -->
                    <section>
                        <h2>What's a commit?</h2>

                        <p class="fragment">
                            A <strong class="green">commit</strong> contains <strong class="green">a snapshot of the files at a given point in time</strong>.
                        </p>
                    </section>

                    <section>
                        <h3>It also contains some other information.</h3>

                        <ul>
                            <li class="fragment">Id (hash)</li>
                            <li class="fragment">Author</li>
                            <li class="fragment">Committer</li>
                            <li class="fragment">Comment</li>
                            <li class="fragment">Parent commits (if any)</li>
                            <li class="fragment">Tree</li>
                            <li class="fragment">Date</li>
                        </ul>
                    </section>

                    <section>
                        <p>Wait a second...</p>

                        <h3 class="fragment green">Aren't Author &amp; Commiter the same thing?</h3>

                        <h3 class="fragment">
                            Actually... <span class="fragment">no.</span>
                        </h3>

                        <p>
                            <span class="fragment">They might be the same.</span>
                            <span class="fragment">But they mean different things.</span>
                        </p>
                    </section>

                    <section>
                        <h2>Ever seen this?</h2>

                        <img src="/images/author-vs-commit.png">

                        <aside class="notes" data-markdown>
                            `Author` and `Committer` are not the same, semantically speaking.
                            They may (and most of the times will) be the same.

                            Git allows you to make changes in history in behalf of the original author. Like when you accept a pull request or integrate different branches.

                            So, the author is the person who initially wrote the commit, the commiter is the person who last applied the patch.
                        </aside>
                    </section>

                    <section>
                        <p>But enough of this, it's just metadata.</p>
                        <h2 class="fragment">What's a commit <strong>really</strong> made of?</h2>
                    </section>

                    <section data-background="/images/planes-trains-automobiles.jpg">
                        <h1 class="shadow">Blobs, Trees &amp; Checksums</h1>
                    </section>



                    <!-- ### Blobs ### -->
                    <section>
                        <h2>The Blob</h2>

                        <img src="/images/blob-movie-poster.jpg">
                    </section>

                    <section>
                        <h3>
                            <strong class="green">Git</strong> is actually a very simple <strong class="green">key-value data store</strong>.
                        </h3>

                        <h3 class="fragment">
                            You can give it anything, it will store it and give you back a key.
                        </h3>
                    </section>

                    <section>
                        <h3>
                            The file it creates is called a <strong class="green">blob</strong>. It is the zlib-deflated representation of any given content.
                        </h3>
                        <h3 class="fragment">
                            Git uses blobs to save the different versions of your files.
                        </h3>
                    </section>

                    <section>
                        <h2>Let's check this out</h2>

                        <h3 class="fragment">We will manually version a file.</h3>

                        <pre class="fragment"><code data-trim>$ echo 'testing blobs' > some-file.txt</code></pre>

                        <pre class="fragment"><code data-trim>$ git hash-object -w some-file.txt
d675fa44e50606caa705c3f48de02cf129c7f9a2</code></pre>

<pre class="fragment"><code data-trim>$ find .git/objects
.git/objects
.git/objects/d6
.git/objects/d6/75fa44e50606caa705c3f48de02cf129c7f9a2</code></pre>

                        <p class="fragment">
                            As we can see, git now has a blob with our file's content.<br>
                            This will be v1 of some-file.txt.
                        </p>
                    </section>

                    <section>
                        <h3>Add some modifications to the file</h3>

                        <pre><code data-trim>echo 'a new line' >> some-file.txt</code></pre>

                        <pre class="fragment"><code data-trim>$ git hash-object -w some-file.txt
1aeaedbf4ee8dccec5bc2b1f1168efef19378ffd</code></pre>

                        <pre class="fragment"><code data-trim>$ find .git/objects
.git/objects
.git/objects/1a
.git/objects/1a/eaedbf4ee8dccec5bc2b1f1168efef19378ffd
.git/objects/d6
.git/objects/d6/75fa44e50606caa705c3f48de02cf129c7f9a2</code></pre>

                        <p class="fragment">
                            Now we have both versions of our file.
                        </p>
                    </section>

                    <section>
                        <h3>Let's see both versions</h3>

                        <pre class="fragment"><code data-trim>$ git cat-file d675fa44e50606caa705c3f48de02cf129c7f9a2
testing blobs</code></pre>

<pre class="fragment"><code data-trim>$ git cat-file 1aeaedbf4ee8dccec5bc2b1f1168efef19378ffd
testing blobs
a new line</code></pre>

                        <aside class="notes" data-markdown>
                            We use `git cat-file` because the blob file is actually the zlib-deflated data, using regular `cat` would just output unreadable gibberish.
                        </aside>
                    </section>

                    <section>
                        <h2>But we lost the filenames in the process!</h2>

                        <h3>Yes, we would have to do this manually...</h3>
                    </section>

                    <section>
                        <h3>Let's see how</h3>

                        <div class="fragment">
                            <p>Restoring the first version</p>

                            <pre><code data-trim>$ git cat-file d675fa4... > some-file.txt</code></pre>
                        </div>


                        <div class="fragment">
                            <p>Now the second one</p>

                            <pre><code data-trim>$ git cat-file 1aeaedb... > some-file.txt</code></pre>
                        </div>

                        <p class="fragment">
                            Of course this is ridiculously impractical, but is <em>(a really simplified version of)</em> what Git does under the hood.
                        </p>
                    </section>



                    <!-- ### Trees ### -->
                    <section>
                        <h2>
                            Enter the <strong>Tree object</strong>.
                        </h2>

                        <h3 class="fragment">
                            A <strong class="green">tree</strong> references <strong class="green">other trees</strong> and <strong class="green">blobs</strong>. It also stores the <strong class="green">filename</strong> that correspond to each tree and blob it contains.
                        </h3>
                    </section>

                    <section>
                        <h3>This is what a <strong class="green">tree</strong> looks like</h3>

                        <img src="/images/tree-graph.svg">
                    </section>

                    <section>
                        <h3>And this is what a tree file actually stores</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>Mode</th>
                                    <th>Type</th>
                                    <th>Hash</th>
                                    <th>Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>100755</td>
                                    <td>tree</td>
                                    <td>05fd5a3</td>
                                    <td>src</td>
                                </tr>
                                <tr>
                                    <td>100644</td>
                                    <td>blob</td>
                                    <td>d3ef0cc</td>
                                    <td>README.md</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>

                    <section>
                        <h2>
                            Yes, it does look like a filesystem.
                        </h2>

                        <h3>
                            <span class="fragment">That's because</span>
                            <span class="fragment">it's Git's representation of the files in the repository.</span>
                        </h3>

                        <h3 class="fragment">
                            A <strong class="green">tree</strong> is a <strong class="green">directory</strong>
                            <span class="fragment">and a <strong class="green">blob</strong> is a <strong class="green">file</strong>.</span>
                        </h3>
                    </section>


                    <!-- ### Checksums ### -->

                    <section>
                        <h3>You may have noticed that <strong class="green">blobs</strong> and <strong class="green">trees</strong> are identified by a <strong class="green">hash</strong>.</h3>

                        <h3>This is not just a simple identifier</h3>
                    </section>

                    <section>
                        <h2>It's a SHA1 <strong>checksum</strong></h2>
                    </section>

                    <section>
                        <img src="/images/oh-i-see.gif">
                    </section>

                    <section>
                        <h3>
                            A <strong class="green">checksum</strong> is a <strong class="green">hash</strong> of some <strong class="green">data</strong>
                        </h3>

                        <p class="fragment">
                            The purpose is to <strong class="green">detect changes</strong> that may be introduced to a file. Willingly, by editing, or unwillingly, caused during data transmission or storage (file corruption).
                        </p>
                    </section>

                    <section>
                        <h3>
                            <strong class="green">Commits</strong>, <strong class="green">blobs</strong> and <strong class="green">trees</strong> are <strong class="green">checksumed</strong>.
                        </h3>

                        <p class="fragment">
                            And the resulting <strong class="green">hash</strong> is used to <strong class="green">identify</strong> each of <strong class="green">this objects</strong>.
                        </p>

                        <p class="fragment">This also means...</p>
                    </section>

                    <section>
                        <h2>Data integrity FTW!</h2>

                        <h3 class="fragment">There is <strong class="green">no data corruption</strong> that can go unnoticed to Git.</h3>
                    </section>

                    <section data-background="/images/great-success.jpg" data-background-size="contain"></section>
                </section>



                <!-- ### Moving Parts ### -->
                <section>
                    <!-- ### REHASH ### -->
                    <section>
                        <h2>#REHASH</h2>
                        <h3>Refreshing our memory</h3>

                        <ul>
                            <li class="fragment">Working Directory</li>
                            <li class="fragment">Staging area</li>
                            <li class="fragment">Remote Repository</li>
                        </ul>

                        <aside class="notes" data-markdown>
                            Let's go over some other parts that we already know, just to be sure we're on the same page.
                        </aside>
                    </section>



                    <!-- ### Working directory ### -->
                    <section>
                        <h3>The <strong class="green">Working Directory</strong></h3>

                        <p>
                            The <strong class="green">working directory</strong> are your files at a given point in time (commit). These are the files you work on.
                        </p>
                    </section>



                    <!-- ### Index/Stage ### -->
                    <section>
                        <h3>The Staging Area</h3>

                        <p>
                            The <strong class="green">staging area</strong> (AKA The Index) is a pre-commit stage that you use to <strong>add</strong> the changes to be commited next.
                        </p>
                    </section>



                    <!-- ### Remote ### -->
                    <section>
                        <h3>Remote Repository</h3>

                        <p>
                            The <strong class="green">remote repository</strong> is a copy of your local repository in some other machine.
                        </p>

                        <p class="fragment">
                            When you <strong class="green">clone</strong> a repository you're downloading a copy of it.
                        </p>

                        <p class="fragment">
                            It will remember where's the <strong>original</strong>, to know where it should fetch from and push to. This will be called <strong class="green">origin</strong> by default.
                        </p>
                    </section>
                </section>



                <!-- ### Branching 101 ### -->
                <section>
                    <section>
                        <h2>Branching 101</h2>
                    </section>

                    <!-- ### Branches ### -->
                    <section>
                        <h3>What do we talk about when we talk about <strong class="green">branches</strong>?</h3>

                        <p class="fragment">
                            A <strong class="green">branch</strong> is simply a <strong class="green">pointer</strong> to a <strong class="green">commit</strong>.
                        </p>

                        <img src="/images/branches.svg" class="fragment">

                        <p class="fragment">
                            Git will automatically point the current branch to new commits as you go.
                        </p>
                    </section>



                    <!-- ### The HEAD ### -->
                    <section>
                        <h3>But, how does Git know which is the <strong class="green">current branch</strong>?</h3>

                        <p class="fragment">
                            There's a <strong>special pointer</strong> called <strong class="green">HEAD</strong>. And it's just <strong class="green">a pointer to the current branch</strong>.
                        </p>

                        <img src="/images/HEAD.svg" class="fragment">
                    </section>

                    <!-- ### Detached HEAD State ### -->
                    <section>
                        <h3>Bonus: <strong class="green">Detached HEAD State</strong></h3>

                        <pre class="fragment"><code>Note: checking out '94a87f75a'.

You are in 'detached HEAD' state. You can look around, make
experimental changes and commit them, and you can discard any
commits you make in this state without impacting any branches by
performing another checkout.

If you want to create a new branch to retain commits you create,
you may do so (now or later) by using -b with the checkout
command again. Example:

  git checkout -b new_branch_name

HEAD is now at 94a87f7... Added readme</code></pre>

                        <h3 class="fragment">Confusing, right?</h3>
                    </section>

                    <section>
                        <h3>It's <strong>a lot simpler</strong> than it looks like</h3>

                        <p class="fragment">
                            The <strong class="green">detached HEAD state</strong> happens when you <strong>check out a commit or a tag</strong> that is <strong>not the latest</strong> in the branch, i.e. <strong>your HEAD no longer points to a branch</strong>.
                        </p>

                        <p class="fragment">
                            Git will let you make new commits, creating a tangent in history, which you can keep by creating a new branch, or discard, by checking out another branch.
                        </p>
                    </section>



                    <!-- ### Remote-tracking Branches ### -->
                    <section>
                        <h3>Remote-tracking branches</h3>

                        <p class="fragment">
                            <strong class="green">Remote-tracking branches</strong> are <strong>local</strong> references to the state of the branches in the remote(s).
                        </p>

                        <img src="/images/remote-tracking-branches.svg" class="fragment">

                        <p class="fragment">
                            They <strong>can't be moved</strong>, that is done <strong>automatically</strong> by Git when you <strong>push</strong> or <strong>fetch</strong>.
                        </p>
                    </section>
                </section>



                <!-- ### Go with the Workflow ### -->
                <section>
                    <section data-background="/images/go_with_the_flow.jpg">
                        <h1>Go with the flow</h1>

                        <p>
                            <span class="fragment">Phew! We've covered the basics!</span>
                            <span class="fragment">But it's not over...</span>
                        </p>

                        <h3 class="fragment">We'll go into THE WORKFLOW</h3>
                    </section>

                    <section>
                        <h3>What do we do every day?</h3>

                        <p class="fragment">Besides commit...</p>

                        <h2 class="fragment">Push &amp; Pull</h2>
                    </section>

                    <section>
                        <h3>You probaby know this already</h3>

                        <p class="fragment">
                            But you need to get this right, otherwise...
                        </p>

                        <div class="fragment">
                            <img src="/images/bad-time.png">

                            <p>
                                <strong>YOU'RE GONNA HAVE A BAD TIME</strong>
                            </p>
                        </div>
                    </section>

                    <section>
                        <img src="/images/push-pull-bad-time.jpg">
                    </section>



                    <!-- ### Pull ### -->
                    <section>
                        <h3>
                            <strong class="green">pull</strong>
                            <strong class="fragment">
                                =<strong class="fragment green">fetch</strong>
                            </strong>
                            <span class="fragment">
                                + (<strong class="green">merge</strong>
                                | <strong class="green">rebase</strong>)
                            </span>
                        </h3>

                        <div class="box box-2-4 align-left fragment">
                            <p>
                                $ git pull
                                <span class="fragment slide-in">
                                    <i class="fa fa-arrow-right"></i>
                                    <strong class="green">merge</strong>
                                </span>
                            </p>

                            <p class="fragment">
                                $ git pull --rebase
                                <span class="fragment slide-in">
                                    <i class="fa fa-arrow-right"></i>
                                    <strong class="green">rebase</strong>
                                </span>
                            </p>
                        </div>
                    </section>



                        <!-- ### Fetch ### -->
                        <section>
                            <h2>Fetch</h2>

                            <img src="/images/fetch-fail.jpg">
                        </section>

                        <section>
                            <p>
                                <strong class="green">Fetch</strong> updates the <strong class="green">remote-tracking branches</strong> to reflect the state of the <strong class="green">remote branches</strong>
                            </p>

                            <img src="/images/fetch.svg">

                            <p>
                                Bringing new commits along, if there are any.
                            </p>
                        </section>

                        <section>
                            <h3>Yep! Just that</h3>

                            <p class="fragment">
                                We have the new <strong class="green">commits</strong>, and the updated <strong class="green">remote-tracking branches</strong>...
                            </p>

                            <h3 class="fragment">BUT!</h3>
                        </section>

                        <section>
                            <h3>
                                Our <strong class="green">local branch</strong> is still behind.
                            </h3>
                            <h3 class="fragment">
                                Our <strong class="green">working directory</strong> is still behind.
                            </h3>

                            <p class="fragment">
                                We need to update both!
                            </p>

                            <h3 class="fragment">
                                <strong class="green">merge</strong> | <strong class="green">rebase</strong>
                            </h3>
                        </section>

                        <section>
                            <h3>We'll use this case, a little more daunting</h3>

                            <img src="/images/merge-rebase.svg">
                        </section>


                    <section>
                        <h2>Plan the attack</h2>

                        <div class="fragment">
                            <h3>Merge workflow</h3>
                            <ol>
                                <li class="fragment">
                                    <strong class="green">merge</strong> <strong class="orange">hotfix</strong>
                                    into <strong class="orange">master</strong>
                                </li>
                                <li class="fragment">
                                    <strong class="green">merge</strong> <strong class="orange">origin/master</strong>
                                    into <strong class="orange">master</strong>
                                </li>
                            </ol>
                        </div>

                        <div class="fragment">
                            <h3>Rebase workflow</h3>
                            <ol>
                                <li class="fragment">
                                    <strong class="green">rebase</strong> <strong class="orange">hotfix</strong>
                                    into <strong class="orange">master</strong>
                                </li>
                                <li class="fragment">
                                    <strong class="green">rebase</strong> <strong class="orange">origin/master</strong>
                                    into <strong class="orange">master</strong>
                                </li>
                            </ol>
                        </div>
                    </section>


                    <!-- ### Merge ### -->
                        <section>
                            <h2>Merge workflow</h2>

                            <img src="/images/merge.jpg"/>
                        </section>

                        <!-- ### Merge hotfix into master ### -->
                        <section>
                            <h2>
                                <strong class="badge">1</strong>
                                <strong class="green">merge</strong> <strong class="orange">hotfix</strong>
                                into <strong class="orange">master</strong>
                            </h2>
                        </section>

                        <section>
                            <pre><code>$ git checkout master</code></pre>

                            <img src="/images/merge-01.svg">
                        </section>

                        <section>
                            <pre><code>$ git merge hotfix
Updating f0dde76..5d6ee4c
Fast-forward
index.html | 2 ++
1 file changed, 2 insertions(+)</code></pre>

                            <img src="/images/merge-02.svg">
                        </section>

                        <!-- ### Fast-forward... WTFIFF?!? ### -->
                        <section>
                            <h2>Fast-forward</h2>

                            <p class="fragment">
                                When the history between two branches doesn't diverge, Git can just move the pointer of your <strong class="green">local branch</strong> <strong>forward</strong>.
                            </p>

                            <h3 class="fragment">
                                No <strong class="green">merge</strong>.
                            </h3>
                            <h3 class="fragment">
                                No <strong class="green">rebase</strong>.
                            </h3>
                            <h3 class="fragment">
                                Just move it <strong class="green">forward</strong>.
                            </h3>

                            <aside class="notes">
                                Other VCSs will only make merges, even in cases like this. The difference here is the branching system. Since Git's branches are just pointers, this can be easily achieved by moving it.
                            </aside>
                        </section>



                        <!-- ### Merge origin/master into master ### -->
                        <section>
                            <h2>
                                <strong class="badge">2</strong>
                                <strong class="green">merge</strong> <strong class="orange">origin/master</strong>
                                into <strong class="orange">master</strong>
                            </h2>

                            <pre class="fragment"><code>$ git merge origin/master
Merge made by the 'recursive' strategy.
index.html |    1 +
1 file changed, 1 insertion(+)</code></pre>

                            <aside class="notes">
                                Because the commit on the branch you’re on isn’t a direct ancestor of the branch you’re merging in, Git has to do some work. In this case, Git does a simple three-way merge, using the two snapshots pointed to by the branch tips and the common ancestor of the two.
                            </aside>
                        </section>

                        <section>
                            <h3><strong class="green">Recursive strategy</strong> = three-way merge</h3>

                            <img src="/images/merge-03.svg"/>

                            <aside class="notes">
                                Git will compare the common ancestor and try to resolve any conflicts automatically.
                                Three-way merge is the smartest stragey for automatic conflict resolution.
                            </aside>
                        </section>

                        <section>
                            <h3>
                                Snapshot created
                                <i class="fa fa-arrow-right"></i>
                                <strong class="green">merge commit</strong>
                            </h3>
                            <img src="/images/merge-04.svg">

                            <aside class="notes">
                                <p>
                                    The downside is that the snapshots of the commits that were on origin/master are now all applied together in the merge commit.
                                </p>
                                <p>
                                    We could get rid of these old commits, since the changes are now duplicated. But that would leave a difficult to comprehend history.
                                </p>

                                <p>
                                    So, let's try it again, there's a better way.
                                </p>
                            </aside>
                        </section>



                    <!-- ### Rebase ### -->
                        <section>
                            <h2>Rebase workflow</h2>

                            <img src="/images/rebase.gif"/>
                        </section>

                        <!-- ### Rebase hotfix into master ### -->
                        <section>
                            <h2>
                                <strong class="badge">1</strong>
                                <strong class="green">rebase</strong> <strong class="orange">hotfix</strong>
                                into <strong class="orange">master</strong>
                            </h2>
                        </section>

                        <section>
                                <pre><code>$ git rebase hotfix
First, rewinding head to replay your work on top of it...
Fast-forwarded feature to master.</code></pre>

                            <img src="/images/rebase-01.svg">
                        </section>

                        <section>
                            <h2>Yep! Fast-forward again!</h2>

                            <p class="fragment">
                                Using <strong class="green">rebase</strong> or <strong class="green">merge</strong> when the history has
                                <strong>not diverged</strong> will both result in a
                                <strong class="green">fast-forward</strong>.
                            </p>

                            <p class="fragment">
                                Unless <strong class="green">--no-ff</strong> flag is passed.
                            </p>
                        </section>



                        <!-- ### Rebase origin/master into master ### -->
                        <section>
                            <h2>
                                <strong class="badge">2</strong>
                                <strong class="green">rebase</strong> <strong class="orange">origin/master</strong>
                                into <strong class="orange">master</strong>
                            </h2>

                                <pre class="fragment"><code>$ git rebase origin/master
First, rewinding head to replay your work on top of it...
Applying: The commit summary here</code></pre>

                            <aside class="notes">
                                Again the the commit on the branch you’re on isn’t a direct ancestor of the branch you’re merging in.
                            </aside>
                        </section>

                        <section>
                            <h2>Rewinding head?</h2>
                            <h3 class="fragment">How does rebase work?</h3>
                        </section>

                        <section>
                            <h3>First, <strong class="green">rewinds HEAD</strong> to the <strong>common
                                ancestor</strong>.</h3>

                            <img src="/images/rebase-02.svg" class="fragment">
                        </section>

                        <section data-transition="convex-in fade-out">
                            <h3>
                                Then it re-applies the changes in <strong class="orange">master</strong> on top of
                                <strong class="orange">origin/master</strong>.
                            </h3>

                            <img src="/images/rebase-03.svg" class="fragment"/>

                            <aside class="notes">
                                <p>
                                    This commits are not the same, they do have the same changes, but the commits are new.
                                </p>
                                <p>
                                    The old commits are still there, even pointing to the same parent, but have no branch associated to them anymore. In Git, is really difficult to loose something for good.
                                </p>
                            </aside>
                        </section>

                        <section data-transition="fade-in convex-out">
                            <h3>
                                The result is a cleaner, linear history.
                            </h3>

                            <img src="/images/rebase-04.svg" class="fragment"/>
                        </section>


                    <!-- ### Push ### -->
                    <section>
                        <h2>Push</h2>

                        <h3 class="fragment">
                            This command <strong class="green">pushes</strong> our history to the <strong>remote</strong>.
                        </h3>
                    </section>

                    <section>
                        <p>
                            <strong class="orange">origin/master</strong> branch and the <strong>remote</strong>'s <strong class="orange">master</strong> branch are the same.
                        </p>

                        <img src="/images/push-01.svg" class="fragment"/>

                        <p class="fragment">
                            But we have new local commits waiting to be pushed.
                        </p>
                    </section>

                    <section>
                        <pre><code>$ git push
Counting objects: 11, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (9/9), 1.16 KiB | 0 bytes/s, done.
Total 9 (delta 6), reused 0 (delta 0)
To git@github.com:xFlatlinex/Git-Talk.git
ef29a87..ae798ab  master -> master</code></pre>
                    </section>

                    <section>
                        <p>Now the remote is up to date with our changes</p>
                        <img src="/images/push-02.svg"/>
                    </section>



                        <!-- ### Forced Push ### -->
                        <section>
                            <h2>Forced push</h2>

                            <div class="box box-2-4 fragment">
                                <p>$ git <span class="green">push</span> <strong class="red">--force</strong></p>
                            </div>

                            <img src="/images/git_push_--force.gif" class="fragment"/>
                        </section>

                        <section>
                            <h3>A new situation</h3>

                            <img src="/images/push--force-01.svg" class="fragment"/>

                            <p class="fragment">
                                We will rebase <strong class="orange">master</strong> from <strong class="orange">ticket</strong>
                            </p>
                        </section>

                        <section>
                            <img src="/images/push--force-02.svg"/>

                            <aside class="notes">
                                <p>
                                    Note that <strong class="orange">origin/master</strong> (and the remote <strong class="orange">master</strong> branch) still points to our now orphan "pre-rebase" commits.
                                </p>
                            </aside>
                        </section>

                        <section>
                            <h3>
                                We rewrote <strong class="orange">master</strong>'s history.
                            </h3>

                            <p class="fragment">
                                We have introduced a change <strong class="fragment highlight-blue">before</strong> our <strong class="orange">master</strong> changes.
                            </p>

                            <p class="fragment">
                                So the original changes are still there. But the local history is now completely different.
                            </p>
                        </section>

                    <section>
                        <h3><strong class="red">Only</strong> in situations like this</h3>
                        <h3>it is justified to <strong class="green">force push</strong></h3>

                        <p class="fragment">
                            It is <strong class="red">never safe</strong>, but with proper coordination with your team mates it can go painlessly.
                        </p>
                    </section>

                    <section>
                        <img src="/images/push--force-03.svg"/>
                    </section>
                </section>



                <!-- ### Everything you (n)ever wanted to know about Push/Pull Syntax ### -->
                <section>
                    <section>
                        <h2>Everything you <span class="fragment">(n)</span>ever wanted to know about push/pull syntax</h2>
                    </section>



                    <!-- ### WTF are refs? ### -->



                    <!-- ### Long syntax ### -->
                    <section>
                        <h2>Long syntax</h2>

                        <pre><code>$ git pull &lt;remote&gt; &lt;remote ref&gt;[:&lt;local ref&gt;]
$ git push &lt;remote&gt; &lt;local ref&gt;[:&lt;remote ref&gt;]</code></pre>

                        <p>
                            <strong class="green">ref</strong> is the path to the <strong class="green">object</strong> as it is found in the .git/ directory, for example: refs/heads/master or refs/tags/some-tag.
                        </p>
                    </section>

                    <section>
                        <h2>Long syntax <strong>push</strong> example</h2>

                        <pre><code>$ git push -u origin refs/heads/branch:refs/heads/branch-alt
Total 0 (delta 0), reused 0 (delta 0)
To git@github.com:user/repo.git
* [new branch]      branch -> branch-alt</code></pre>

                        <aside class="notes" data-markdown>
                            In this case, we **push** a local branch `branch` with the
                            alternative name on the remote `branch-alt`.
                        </aside>
                    </section>



                    <!-- ### Short syntax ### -->
                    <section>
                        <h2>Short syntax sample</h2>

                        <h3>With non-matching branch names</h3>

                        <pre><code>$ git push origin branch-local:branch-remota</code></pre>

                        <h3>Matching branch names</h3>

                        <pre><code>$ git push origin branch-x:branch-x</code></pre>
                        <p>Even shorter!</p>
                        <pre><code>$ git push origin branch-x</code></pre>

                        <aside class="notes">
                            <p>
                                Git is smart enough to let you use a short syntax for the refs, using only the name and not the full path.
                            </p>

                            <p>
                                There are two short levels. You can use only the branch names insted of the full path to the ref object; and if the branch name matches on the remote you can skip naming the remote branch altogether. This is the most common case, as branch names on the remote are rarely different.
                            </p>
                        </aside>
                    </section>



                    <!-- ### So... ### -->
                    <section>
                        <h3>Wrapping up</h3>

                        <p>We could say</p>

                        <p>
                            $ git push <strong class="orange">&lt;to which remote&gt;</strong> <strong class="orange">&lt;which
                            local branch&gt;</strong>:[<strong class="orange">&lt;to which remote branch&gt;</strong>]
                        </p>

                        <p>
                            $ git pull <strong class="orange">&lt;from which remote&gt;</strong> <strong class="orange">&lt;which remote branch&gt;</strong>:[<strong class="orange">&lt;to which local branch&gt;</strong>]
                        </p>
                    </section>
                </section>

                <section>
                    <h3>Links</h3>
                    <ul>
                        <li><a href="http://git-scm.com">http://git-scm.com</a></li>
                        <li><a href="http://git-scm.com/book/en/v2">http://git-scm.com/book/en/v2</a></li>
                        <li><a href="http://www.gitguys.com">http://www.gitguys.com</a></li>
                        <li><a href="http://www.drdobbs.com/tools/three-way-merging-a-look-under-the-hood/240164902">http://www.drdobbs.com/tools/three-way-merging-a-look-under-the-hood/240164902</a></li>
                    </ul>
                </section>

                <section>
                    <h1>Questions?</h1>

                    <img src="/images/scrubs-head-explode-o.gif"/>
                </section>

                <section>
                    <h1>Thanks!</h1>
                    <img src="/images/bye.jpg"/>
                </section>

            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'convex', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

    </body>
</html>
