<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>All your History are Belong to GIT</title>

        <meta name="description" content="Understanding what we do in GIT, how and why.">
        <meta name="author" content="Luciano Longo">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/flatline.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <div class="slides">
                <section
                    data-background="/images/all-your-history-are-belong-to-git.png"
                    data-background-size="contain"
                    data-background-color="#000"
                >
                </section>



                <!-- ### INTRO ### -->
                <section>
                    <h2>We're all already using GIT</h2>
                    <h1 class="fragment fade-in">RIGHT???</h1>
                    <h1 class="fragment fade-in disapproval">ಠ_ಠ</h1>

                    <aside class="notes">
                        Por qué otra charla de git?
                        Ya todos lo estamos usando en nuestros proyectos.
                    </aside>
                </section>

                <section>
                    <h1>But...</h1>
                </section>

                <section
                    data-background="/images/noidea.jpg"
                    data-background-size="contain"
                >
                    <aside class="notes" data-markdown>
                        Sabemos realmente lo que estamos haciendo y por qué?

                        A veces, trabajando, hacemos estas cosas **de memoria**, porque nos
                        dijeron de hacerlo de tal o cual manera. **Pero la memoria nos puede
                        fallar.**

                        Si no sabemos por qué algo es como es, el día que nos toque **un caso
                        distinto** y lo que hacíamos de memoria no nos sirva, **no vamos a saber
                        que hacer**. Por eso creo que siempre hay que saber como funcionan las
                        cosas por detras, o al menos, tener una idea.

                        Y esta es la idea de la charla, mejorar el conocimiento que tenemos de
                        git, y saber por qué hacemos lo que hacemos. Y de paso, por ahí nos
                        demos cuenta si lo que estamos haciendo es realmente lo que nos
                        conviene.
                    </aside>
                </section>



                <!-- ### WTF is GIT ### -->
                <section>
                    <section id="fragments">
                        <h2>WTF is GIT!?</h2>
                        <div class="fragment fade-in">
                            <h3 class="fragment highlight-red strike"><strong>Tree</strong> of <strong>changes</strong> over time?</h3>
                        </div>
                        <p class="fragment">Not quite.</p>
                        <h3>
                            <span class="fragment">Git is a <strong class="green">DAG</strong></span>
                            <span class="fragment">of <strong class="green">snapshots</strong>.</span>
                        </h3>
                    </section>
                </section>

                <section>
                    <section data-background="/images/dag-wat.jpg">
                        <h1>DAG wat?</h1>
                    </section>

                    <section>
                        <h2>Directed Acyclic Graph</h2>
                    </section>

                    <section
                        data-background="/images/dr-evil-right.gif"
                        data-background-size="contain"
                    >
                    </section>

                    <section>
                        <h2>Directed Acyclic Graph</h2>

                        <h3>
                            A <strong class="green">DAG</strong>, is a <strong class="fragment highlight-green">directed graph</strong> with <strong class="fragment highlight-green">no directed cycles</strong>.
                        </h3>
                    </section>

                    <section>
                        <h3>
                            Formed by a collection of <strong class="fragment highlight-green">nodes</strong> and <strong class="fragment highlight-green">directed edges</strong> that connect them.
                        </h3>

                        <img src="/images/dag-nodes-edges.svg">

                        <p>
                            <strong class="fragment highlight-green">There is no way to start at some node N and cycle back again to N.</strong>
                        </p>
                    </section>

                    <section>
                        <h3>
                            The difference with a tree is that <strong class="fragment highlight-green grow">nodes in a DAG can have multiple parents</strong>.
                        </h3>

                        <h3 class="fragment">
                            <strong class="red">A tree doesn't allow nodes to have multiple parents.</strong>
                        </h3>
                    </section>

                    <section>
                        <h3>
                            The most common case of this in git is when you do a merge. <strong class="fragment highlight-green">A merge commit will have all of the commits that were merged as parents.</strong>
                        </h3>
                    </section>

                    <section>
                        <h2>This is could be a <strong>tree</strong></h2>
                        <p><em>(Polytree actually &mdash;directed tree)</em></p>
                        <img src="/images/tree-sample.svg">
                        <h3>Only one parent per node</h3>
                    </section>

                    <section>
                        <h2>Only it's really a <strong>DAG</strong></h2>
                        <img src="/images/dag-sample.svg">
                        <h3>The <strong class="blue">blue node</strong> represents a <strong class="green">merge commit</strong></h3>
                    </section>
                </section>

                <section>
                    <section>
                        <h2><strong>Snapshots</strong>, not <strong>changes</strong></h2>
                    </section>

                    <section>
                        <h3>Most VCSs store only the <strong class="green">file changes</strong></h3>
                        <img src="/images/changes.svg">
                    </section>

                    <section>
                        <h3>While GIT stores a <strong class="green">snapshot</strong> <strong>of each file</strong></h3>
                        <img src="/images/snapshots.svg">
                        <h4>
                            <strong>Efficient:</strong> If a file didn't change, a <strong class="green">link to the previous version</strong> is stored.
                        </h4>
                    </section>

                </section>



                <!-- ### Trees, Blobs & Checksums ### -->
                <section>
                    <!-- ### What's a commit made of? ### -->
                    <section>
                        <h2>What's a commit?</h2>

                        <p class="fragment">
                            A <strong class="green">commit</strong> contains <strong class="green">a snapshot of the files at a given point in time</strong>.
                        </p>
                    </section>

                    <section>
                        <h3>It also contains some information.</h3>

                        <ul>
                            <li class="fragment">Id (hash)</li>
                            <li class="fragment">Author</li>
                            <li class="fragment">Committer</li>
                            <li class="fragment">Comment</li>
                            <li class="fragment">Parent commit (if any)</li>
                            <li class="fragment">Tree</li>
                            <li class="fragment">Date</li>
                        </ul>
                    </section>

                    <section>
                        <p>Wait a second...</p>

                        <h3 class="fragment green">Aren't Author &amp; Commiter the same thing?</h3>

                        <h3 class="fragment">
                            Actually... <span class="fragment">no.</span>
                        </h3>

                        <p>
                            <span class="fragment">They might be the same.</span>
                            <span class="fragment">But they mean different things.</span>
                        </p>
                    </section>

                    <section>
                        <h2>Ever seen this?</h2>

                        <img src="/images/author-vs-commit.png">

                        <aside class="notes" data-markdown>
                            `Author` and `Committer` are not the same, semantically speaking.
                            They may (and most of the times will) be the same.

                            Git allows you to make changes in history in behalf of the original author. Like when you accept a pull request or integrate different branches.

                            So, the author is the person who initially wrote the commit, the commiter is the person who last applied the patch.
                        </aside>
                    </section>

                    <section>
                        <p>But enough of this, it's just metadata.</p>
                        <h2 class="fragment">What's a commit <strong>really</strong> made of?</h2>
                    </section>

                    <section data-background="/images/planes-trains-automobiles.jpg">
                        <h1 class="shadow">Blobs, Trees &amp; Checksums</h1>
                    </section>



                    <!-- ### Blobs ### -->
                    <section>
                        <h2>The Blob</h2>

                        <img src="/images/blob-movie-poster.jpg">
                    </section>

                    <section>
                        <h3>
                            <strong class="green">Git</strong> is actually a very simple <strong class="green">key-value data store</strong>.
                        </h3>

                        <h3 class="fragment">
                            You can give it anything, it will store it and give you back a key.
                        </h3>
                    </section>

                    <section>
                        <h3>
                            The file it creates is called a <strong class="green">blob</strong>. It is the binary representation of any given content.
                        </h3>
                        <h3 class="fragment">
                            Git uses blobs to save the different versions of your files.
                        </h3>
                    </section>

                    <section>
                        <h2>Let's check this out</h2>

                        <h3 class="fragment">We will manually version a file.</h3>

                        <pre class="fragment"><code data-trim>$ echo 'testing blobs' > some-file.txt</code></pre>

                        <pre class="fragment"><code data-trim>$ git hash-object -w some-file.txt
d675fa44e50606caa705c3f48de02cf129c7f9a2</code></pre>

<pre class="fragment"><code data-trim>$ find .git/objects
.git/objects
.git/objects/d6
.git/objects/d6/75fa44e50606caa705c3f48de02cf129c7f9a2</code></pre>

                        <p class="fragment">
                            As we can see, git now has a blob with our file's content.<br>
                            This will be v1 of some-file.txt.
                        </p>
                    </section>

                    <section>
                        <h3>Add some modifications to the file</h3>

                        <pre><code data-trim>echo 'a new line' >> some-file.txt</code></pre>

                        <pre class="fragment"><code data-trim>$ git hash-object -w some-file.txt
1aeaedbf4ee8dccec5bc2b1f1168efef19378ffd</code></pre>

                        <pre class="fragment"><code data-trim>$ find .git/objects
.git/objects
.git/objects/1a
.git/objects/1a/eaedbf4ee8dccec5bc2b1f1168efef19378ffd
.git/objects/d6
.git/objects/d6/75fa44e50606caa705c3f48de02cf129c7f9a2</code></pre>

                        <p class="fragment">
                            Now we have both versions of our file.
                        </p>
                    </section>

                    <section>
                        <h3>Let's see both versions</h3>

                        <pre class="fragment"><code data-trim>$ git cat-file d675fa44e50606caa705c3f48de02cf129c7f9a2
testing blobs</code></pre>

<pre class="fragment"><code data-trim>$ git cat-file 1aeaedbf4ee8dccec5bc2b1f1168efef19378ffd
testing blobs
a new line</code></pre>
                    </section>

                    <section>
                        <h2>But we lost the filenames in the process!</h2>

                        <h3>Yes, we would have to do this manually...</h3>
                    </section>

                    <section>
                        <h3>Let's see how</h3>

                        <div class="fragment">
                            <p>Restoring the first version</p>

                            <pre><code data-trim>$ git cat-file d675fa4... > some-file.txt</code></pre>
                        </div>


                        <div class="fragment">
                            <p>Now the second one</p>

                            <pre><code data-trim>$ git cat-file 1aeaedb... > some-file.txt</code></pre>
                        </div>

                        <p class="fragment">
                            Of course this is ridiculously impractical, but is <em>(a really simplified version of)</em> what Git does under the hood.
                        </p>
                    </section>



                    <!-- ### Trees ### -->
                    <section>
                        <h2>
                            Enter the <strong>Tree object</strong>.
                        </h2>

                        <h3 class="fragment">
                            A <strong class="green">tree</strong> references <strong class="green">other trees</strong> and <strong class="green">blobs</strong>. It also stores the <strong class="green">filename</strong> that correspond to each tree and blob it contains.
                        </h3>
                    </section>

                    <section>
                        <h3>This is what a <strong class="green">tree</strong> looks like</h3>

                        <img src="/images/tree-graph.svg">
                    </section>

                    <section>
                        <h3>And this is what a tree file actually stores</h3>

                        <table>
                            <thead>
                                <th>Mode</th>
                                <th>Type</th>
                                <th>Hash</th>
                                <th>Name</th>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>100755</td>
                                    <td>tree</td>
                                    <td>05fd5a3</td>
                                    <td>src</td>
                                </tr>
                                <tr>
                                    <td>100644</td>
                                    <td>blob</td>
                                    <td>d3ef0cc</td>
                                    <td>README.md</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>

                    <section>
                        <h2>
                            Yes, it does look like a filesystem.
                        </h2>

                        <h3>
                            <span class="fragment">That's because</span>
                            <span class="fragment">it's Git's representation of the files in the repository.</span>
                        </h3>

                        <h3 class="fragment">
                            A <strong class="green">tree</strong> is a <strong class="green">directory</strong>
                            <span class="fragment">and a <strong class="green">blob</strong> is a <strong class="green">file</strong>.</span>
                        </h3>
                    </section>


                    <!-- ### Checksums ### -->
                </section>



                <!-- ### Moving Parts ### -->



                    <!-- ### Working directory ### -->



                    <!-- ### Index/Stage ### -->



                    <!-- ### Remote ### -->



                <!-- ### Branching 101 ### -->



                    <!-- ### The HEAD ### -->



                    <!-- ### Branches and Remote-tracking Branches ### -->



                <!-- ### Go with the Workflow ### -->



                <!-- ### Pull ### -->



                    <!-- ### Fetch ### -->



                    <!-- ### Merge ### -->



                    <!-- ### Rebase ### -->



                <!-- ### Fast-forward... WTFIFF?!? ### -->



                <!-- ### Integrating different branches with rebase ### -->



                <!-- ### Push ### -->



                    <!-- ### Forced Push ### -->



                <!-- ### Everything you (n)ever wanted to know about Push/Pull Syntax ### -->



                    <!-- ### WTF are refs? ### -->



                    <!-- ### Long syntax ### -->



                    <!-- ### Short syntax ### -->



                    <!-- ### So... ### -->

            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'convex', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

    </body>
</html>
